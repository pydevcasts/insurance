kind: ExternalService
name: celery
spec:
  image_pull_policy: Always
  image: celery:5.2.7
  volume_mounts:
    - mount_path: /data
      volume_name: celery
  domains:
  - name: academybime.com
  source:
    context: .
  env:  
    - name: CELERY_BROKER_URL
      value: redis://redis:6379
    - name: CELERY_RESULT_BACKEND
      value: redis://redis:6379
    - name: CELERY_ACCEPT_CONTENT
      value: application/json
    - name: CELERY_TASK_SERIALIZER
      value: json
    - name: CELERY_RESULT_SERIALIZER
      value: json
    - name: CELERY_TIMEZONE
      value: Asia/Tehran
  command:
    - celery 
    - A 
    - insurance
    - worker 
    -l DEBUG
     
